# 6. Enhancing the Experience

In this chapter, we will expand on the functionality from the previous chapter and further enhance the user experience with Remix's primitives, conventions, and levers.

## Getting started

We need to update the `ListLinkItem` component to support deleting items from the list.

If you want to reuse the code from the previous chapter, then follow this guide to get to the starting point of this chapter. Otherwise, feel free to checkout the code in the [start](./start/) folder and dive right into _Chapter 6, Enhancing the Experience_.

### Run the application

Follow these steps to get your application up and running:

1. Make sure you have a `.env` file in the root of your project and that it contains the following line:

```text
DATABASE_URL="file:./dev.db"
```

2. Install the dependencies.

```bash
npm install
```

3. Generate the Prisma client

```bash
npm run build
```

4. Update the SQLite database schema

```bash
npm run update:db
```

5. Start the development server

```bash
npm run dev
```

This starts the development server on port `3000`. You can now open the application in your browser at [http://localhost:3000](http://localhost:3000).

In case you receive Prisma errors during build, schema update, or runtime, you can reset the database by running the following command:

```bash
npm run reset:db
```

6. Seed the database with test data

```bash
npm run seed
```

This is optional, but can be helpful for testing. You can also alter the seed data that is being generated by making changes to the code in `prisma/seed.ts`. Note that with the current setup, you can only seed the database once. After that, `npm run seed` will fail on the unique email constraint during the test user creation.

## Updating the `ListLinkItem` component

1. **Open `app/components/links.tsx` in your editor**

2. **Import the `Form` component and the `FormProps` type from `@remix-run/react`**

```tsx
import type { FormProps, LinkProps as RemixLinkProps } from '@remix-run/react';
import { Form, Link as RemixLink, NavLink as RemixNavLink } from '@remix-run/react';
import { clsx } from 'clsx';
import type { HTMLAttributes } from 'react';
```

3. **Update the `ListLinkItemProps` type**

Copy the following code and replace the existing `ListLinkItemProps` type:

```typescript
type DeleteProps = {
  ariaLabel: string;
  action: FormProps['action'];
};

type ListLinkItemProps = HTMLAttributes<HTMLLIElement> & {
  children: React.ReactNode;
  to: string;
  isActive?: boolean;
  deleteProps?: DeleteProps;
};
```

We update the `ListLinkItemProps` type to support an optional `deleteProps` property that is of type `DeleteProps`. We also add an `isActive` property to the `ListLinkItemProps` type to style the active/current item differently.

4. **Replace the `ListLinkItem` component**

Copy the following code and replace the existing `ListLinkItem` component:

```tsx
export function ListLinkItem({ isActive, className = '', to, deleteProps, children, ...props }: ListLinkItemProps) {
  return (
    <li
      className={clsx(
        'w-full flex flex-row items-center border',
        isActive
          ? 'bg-secondary dark:bg-darkSecondary border-secondary dark:border-darkSecondary'
          : 'hover:bg-backgroundPrimary dark:hover:bg-darkBackgroundPrimary border-background dark:border-darkBackground hover:border-secondary dark:hover:border-darkSecondary',
        className,
      )}
      {...props}
    >
      <RemixNavLink to={to} className="block w-full p-4">
        {children}
      </RemixNavLink>
      {deleteProps && (
        <Form className="p-8 ml-auto" method="POST" action={deleteProps.action}>
          <button type="submit" aria-label={deleteProps.ariaLabel} name="intent" value="delete">
            <svg className="w-8 h-8 " viewBox="0 0 20 20" fill="currentColor">
              <path
                fillRule="evenodd"
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                clipRule="evenodd"
              />
            </svg>
          </button>
        </Form>
      )}
    </li>
  );
}
```

The updated `ListLinkItem` component supports rendering a `Form` component. The `Form` component is rendered only if the `deleteProps` property is provided. The `deleteProps` property contains information for the expense deletion form. The form submits an action to the `deleteProps.action` URL. The `deleteProps.ariaLabel` property is used as the `aria-label` attribute of the icon button. Finally, the form includes a hidden input field with the name `intent` and the value `delete`. This is necessary to distinguish the delete action from the update action on the server - more on that in _Chapter 6, Enhancing the User Experience_.

We further updated the styling of the component. Previously, we used the `className` property of Remix's `NavLink` component for styling. Now, we use a custom `isActive` property to style the active/current item differently. This is necessary because we now style the outer `li` element and not just the `NavLink` component when the item is active.

Note that we will update the `ListLinkItem` component further in _Chapter 6, Enhancing the Experience_.

**Great!** ðŸ¥³ We are all set! ðŸŽ‰

Dive into _Chapter 6, Enhancing the Experience_ now!
